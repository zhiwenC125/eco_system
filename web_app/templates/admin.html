<!DOCTYPE html>
<html>
<head>
    <title>æ™ºæ…§è¿›åŒ–ç®¡ç†åå°</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">
    <div class="container mt-5">
        <div class="card shadow">
            <div class="card-header bg-primary text-white">
                <h2>AI æ™ºæ…§è¿›åŒ–æ§åˆ¶å°</h2>
            </div>
            <div class="card-body text-center">
                <h4 class="mb-4">å½“å‰å®æ—¶æ•°æ®ç§¯ç´¯ï¼š<span class="badge bg-success">{{ new_count }} æ¡</span></h4>
                <p class="text-muted">å½“ç§¯ç´¯çš„æ•°æ®è¶Šå¤šï¼Œæ¨¡å‹è¿›åŒ–åçš„ç¢³æ’æ”¾æ¨¡å¼è¯†åˆ«èƒ½åŠ›è¶Šå¼ºã€‚</p>
                
                <button id="evolveBtn" class="btn btn-lg btn-warning shadow">
                    ğŸš€ å¯åŠ¨æ¨¡å‹è¿›åŒ– (é‡è®­ç»ƒ)
                </button>
                
                <div id="statusBox" class="mt-4 d-none alert"></div>
            </div>
        </div>
        <div class="mt-3">
            <a href="/" class="btn btn-secondary">è¿”å›é¦–é¡µ</a>
        </div>
    </div>

    <script>
        document.getElementById('evolveBtn').onclick = function() {
            const btn = this;
            const statusBox = document.getElementById('statusBox');
            
            btn.disabled = true;
            btn.innerText = "æ­£åœ¨è¿›åŒ–ä¸­ï¼Œè¯·ç¨å€™...";
            statusBox.className = "mt-4 alert alert-info";
            statusBox.innerText = "æ­£åœ¨è¯»å– CSV å¹¶èåˆæ•°æ®...";
            statusBox.classList.remove('d-none');

            fetch('/run_evolution', {method: 'POST'})
            .then(res => res.json())
            .then(data => {
                if(data.status === 'success') {
                    statusBox.className = "mt-4 alert alert-success";
                    statusBox.innerText = data.message;
                } else {
                    statusBox.className = "mt-4 alert alert-danger";
                    statusBox.innerText = "é”™è¯¯ï¼š" + data.message;
                }
                btn.disabled = false;
                btn.innerText = "ğŸš€ å†æ¬¡å¯åŠ¨è¿›åŒ–";
            });
        };
    </script>
</body>
</html>